{% extends "base.html" %}
{% load crispy_forms_filters %}

{% block content %}
  <div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="mb-0">TODO List</h2>
      <a href="{% url 'tasks:add-task' %}" class="btn btn-primary">Add task</a>
    </div>
    <ul class="list-group">
      {% for task in tasks %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ task.content }}</strong><br>{{ task.created_at }}
            {% if task.deadline %}, deadline: {{ task.deadline }}{% endif %}<br>
            <span style="color: gray;">Tags:{% for tag in task.tags.all %} {{ tag.name }}{% endfor %}<span>
          </div>
          <div>
            {% if task.is_done %}
              <a href="{% url "tasks:toggle-task" task.id %}" class="btn btn-warning btn-sm">Undo</a>
            {% else %}
              <a href="{% url "tasks:toggle-task" task.id %}" class="btn btn-success btn-sm">Complete</a>
            {% endif %}
            <a href="{% url "tasks:update-task" task.id %}" class="btn btn-info btn-sm">Update</a>
            <a href="{% url "tasks:delete-task" task.id %}" class="btn btn-danger btn-sm">Delete</a>
          </div>
        </li>
      {% endfor %}
    </ul>
  </div>
{% endblock %}
